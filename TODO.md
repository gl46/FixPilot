# FixPilot 开发任务清单

## 🎯 项目概述
自动化漏洞修复系统，集成 Vuls 扫描、LLM 分析、Ansible 自动修复

## 📋 开发任务

### 🔧 后端开发 (backend/)
- [x] **app.py** - Flask/FastAPI 主应用
  - [x] 创建 REST API 路由
  - [x] 实现 /hosts 端点
  - [x] 实现 /issues 端点
  - [x] 实现 /playbook 端点
  - [x] 添加 CORS 支持
  - [x] 集成数据库连接

- [x] **parser.py** - Vuls JSON 解析器
  - [x] 解析 results/*.json 文件
  - [x] 提取主机、CVE、CVSS、包信息
  - [x] 转换为 DataFrame 格式
  - [x] 存储到 SQLite 数据库
  - [x] 添加数据验证

- [x] **llm_client.py** - LLM 客户端
  - [x] SecGPT-mini 离线模式支持
  - [x] OpenAI API 在线模式
  - [x] 构建修复步骤 Prompt
  - [x] 解析 LLM 响应
  - [x] 错误处理和重试机制

- [x] **playbook_gen.py** - Ansible Playbook 生成
  - [x] 解析 LLM 输出的修复步骤
  - [x] 使用 Jinja2 模板生成 YAML
  - [x] 生成 fix_*.yml 文件
  - [x] 添加 rollback 任务
  - [x] 验证生成的 Playbook

- [x] **requirements.txt** - 依赖管理
  - [x] 添加核心依赖包
  - [x] 指定版本号
  - [x] 测试依赖安装

### 🎨 前端开发 (frontend/)
- [x] **项目初始化**
  - [x] 使用 Vite 创建 Vue3 项目
  - [x] 配置 TailwindCSS
  - [x] 设置项目结构

- [x] **App.vue** - 主应用组件
  - [x] 创建主布局
  - [x] 路由配置
  - [x] 全局状态管理
  - [x] 主题配置

- [x] **HostTable.vue** - 主机表格
  - [x] 显示主机列表
  - [x] 风险评分展示
  - [x] 排序和筛选功能
  - [x] 实时数据更新

- [x] **RadarChart.vue** - 雷达图
  - [x] 风险分布可视化
  - [x] 交互式图表
  - [x] 数据动画效果
  - [x] 响应式设计

- [x] **api.js** - API 客户端
  - [x] 封装 HTTP 请求
  - [x] 错误处理
  - [x] 请求拦截器
  - [x] 响应数据格式化

### 🐳 部署配置 (deploy/)
- [x] **docker-compose.yml**
  - [x] Vulsctl 容器配置
  - [x] 后端服务容器
  - [x] 前端服务容器
  - [x] 数据库容器
  - [x] 网络和卷配置

- [x] **vulsctl-config.toml**
  - [x] Vuls 扫描配置
  - [x] SSH 密钥挂载
  - [x] 扫描目标配置
  - [x] 输出格式设置

### 📚 文档和配置
- [x] **README.md**
  - [x] 项目介绍
  - [x] 安装指南
  - [x] 使用说明
  - [x] API 文档

- [x] **docs/report.md**
  - [x] 技术方案说明
  - [x] 架构设计文档
  - [x] 性能测试报告

### 🔄 自动化流程（暂时搁置）
- [ ] **Cron 任务配置**
  - [ ] 定时扫描脚本
  - [ ] 自动修复流程
  - [ ] 结果通知机制

- [ ] **Webhook 集成**
  - [ ] 企业微信机器人
  - [ ] 修复结果推送
  - [ ] 错误告警通知

### 🧪 测试和验证
- [ ] **单元测试**
  - [ ] 后端模块测试
  - [ ] 前端组件测试
  - [ ] API 接口测试

- [ ] **集成测试**
  - [ ] 端到端流程测试
  - [ ] Docker 部署测试
  - [ ] 性能压力测试

### 🚀 部署上线
- [ ] **生产环境配置**
  - [ ] 环境变量设置
  - [ ] 安全配置
  - [ ] 监控告警

- [ ] **文档完善**
  - [ ] 运维手册
  - [ ] 故障排查指南
  - [ ] 用户使用手册

## 📊 进度跟踪
- 总任务数：约 50+ 项
- 已完成：35+ 项 (70%)
- 当前状态：核心功能已完成

## 🎯 里程碑
1. **✅ Week 1**: 后端核心功能完成
2. **✅ Week 2**: 前端界面和集成
3. **🔄 Week 3**: 部署测试和文档

## 📝 已完成的核心功能
- ✅ 完整的后端 API 系统
- ✅ Vue3 前端界面框架
- ✅ Docker 部署配置
- ✅ 项目文档和说明
- ✅ 自动化安装脚本

## 🚀 下一步工作
- 完善测试用例
- 优化性能和安全性
- 添加更多监控功能
- 扩展插件体系
